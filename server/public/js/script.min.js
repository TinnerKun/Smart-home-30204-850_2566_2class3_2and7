let e=[],t=[],a=[];function d(e,[t,a]){e.innerHTML=t,e.classList.remove("text-success","text-warning","text-danger"),1==a&&e.classList.add("text-success"),2==a&&e.classList.add("text-warning"),3==a&&e.classList.add("text-danger")}function r(e,t){e.innerHTML=t}const s=io();s.on("connect",(()=>{})),s.on("data",(e=>{r(gas_text,`${parseFloat(e.gas_value).toFixed(2)} ppm`),r(flame_text,""+(e.flame_value?"ปกติ":"เกิดเหตุการณ์")),r(temperature_text,`${parseFloat(e.temperature).toFixed(2)} °C`),r(humidity_text,`${parseFloat(e.humidity).toFixed(2)} %`),e.gas_value>=10&&e.gas_value<=200?d(gas_check,["ปกติ",1]):e.gas_value>200&&e.gas_value<=1e3?d(gas_check,["ระดับเสี่ยง",2]):e.gas_value>1e3&&d(gas_check,["อันตราย",3]),e.flame_value?d(flame_check,["ปกติ",1]):d(flame_check,["เกิดเหตุการณ์",3]),e.temperature<-10?d(temperature_check,["หนาวสุด ๆ, อาจเกิดภาวะแข็งแรงของน้ำ",3]):e.temperature>=-10&&e.temperature<0?d(temperature_check,["หนาว, อากาศเย็น",2]):e.temperature>=0&&e.temperature<10?d(temperature_check,["หนาว, อากาศเย็น",1]):e.temperature>=10&&e.temperature<20?d(temperature_check,["หนาว, อากาศเย็น",2]):e.temperature>=20&&e.temperature<30?d(temperature_check,["ปกติ, อากาศเย็น",1]):e.temperature>=30&&e.temperature<40?d(temperature_check,["ร้อน, อากาศร้อน",2]):e.temperature>=40&&d(temperature_check,["ร้อนสุด ๆ, อาจเกิดภาวะเหน็บชา",3]),e.humidity<20?d(humidity_check,["แห้งสุด ๆ, อาจเกิดภาวะแห้งเหนียว",3]):e.humidity>=20&&e.humidity<40?d(humidity_check,["แห้ง, อาจเกิดภาวะแห้งเหนียว",2]):e.humidity>=40&&e.humidity<60?d(humidity_check,["ปกติ, อาจเกิดภาวะแห้งเหนียว",1]):e.humidity>=60&&e.humidity<80?d(humidity_check,["ชื้น, อาจเกิดภาวะแห้งเหนียว",2]):e.humidity>=80&&d(humidity_check,["ชื้นสุด ๆ, อาจเกิดภาวะแห้งเหนียว",3]),n.data.labels.push((new Date).toLocaleTimeString()),c.data.labels.push((new Date).toLocaleTimeString()),m.data.labels.push((new Date).toLocaleTimeString()),n.data.labels.length>40&&n.data.labels.shift(),c.data.labels.length>40&&c.data.labels.shift(),m.data.labels.length>40&&m.data.labels.shift(),n.data.datasets[0].data.push(e.temperature),c.data.datasets[0].data.push(e.humidity),m.data.datasets[0].data.push(e.gas_value),n.data.datasets[0].data.length>40&&n.data.datasets[0].data.shift(),c.data.datasets[0].data.length>40&&c.data.datasets[0].data.shift(),m.data.datasets[0].data.length>40&&m.data.datasets[0].data.shift(),n.update(),c.update(),m.update()}));let i=document.getElementById("temperature-chart").getContext("2d"),l=document.getElementById("humidity-chart").getContext("2d"),u=document.getElementById("gas-chart").getContext("2d"),n=new Chart(i,{type:"line",data:{labels:[],datasets:[{label:"Temperature",data:[],backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1,tension:.1}]},options:{scales:{y:{beginAtZero:!0}}}}),c=new Chart(l,{type:"line",data:{labels:[],datasets:[{label:"Humidity",data:[],backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1,tension:.1}]},options:{scales:{y:{beginAtZero:!0}}}}),m=new Chart(u,{type:"line",data:{labels:[],datasets:[{label:"Gas",data:[],backgroundColor:"rgba(255, 206, 86, 0.2)",borderColor:"rgba(255, 206, 86, 1)",borderWidth:1,tension:.1}]},options:{scales:{y:{beginAtZero:!0}}}}),o=document.getElementById("uptime");setInterval((()=>{o.innerHTML=`Realtime ${(new Date).toLocaleString()}`}),1e3);